# 搜索功能实现说明

## 功能概述
在 Manage 页面的搜索框中输入关键字时，会调用搜索接口进行实时搜索，并在搜索框下方显示搜索结果列表。

## 实现的功能

### 1. 搜索接口集成
- **接口路径**: `GET /api/todo/search`
- **请求参数**:
  - `keyword`: 搜索关键词（必填）
  - `pageNum`: 页码（默认1）
  - `pageSize`: 每页数量（默认10）

### 2. 搜索结果展示
- **位置**: 搜索框下方弹出式列表
- **显示内容**:
  - 第一行：任务标题（关键词高亮显示）
  - 第二行：截止时间（智能格式化显示）
- **样式**: 小型下拉列表，最大高度500px，支持滚动

### 3. 关键词高亮
- 搜索关键词在结果中以黄色背景 + 橙色文字高亮显示
- 支持大小写不敏感匹配

### 4. 滚动分页加载
- 滚动到底部前50px时自动触发加载更多
- 显示加载状态和"已加载全部结果"提示
- 支持无限滚动加载

### 5. 交互优化
- **防抖处理**: 输入后300ms才触发搜索，避免频繁请求
- **点击外部关闭**: 点击搜索结果外部区域自动关闭
- **点击结果**: 点击任务打开任务详情弹窗
- **清空搜索**: 点击清空按钮清除搜索结果

### 6. Mock 数据
- 已添加完整的 mock 数据支持
- 支持按标题和ID模糊搜索
- 模拟300ms延迟，接近真实网络请求

## 文件修改清单

### 新增文件
1. `src/components/business/TaskSearchResults.vue` - 搜索结果组件

### 修改文件
1. `src/views/Manage.vue` - 集成搜索功能
2. `src/mock/index.js` - 添加搜索接口 mock
3. `src/api/request.js` - 添加搜索接口路由

## 使用方法

1. 在 Manage 页面的搜索框中输入关键词
2. 等待300ms后自动触发搜索
3. 搜索结果会在搜索框下方显示
4. 滚动到底部自动加载更多结果
5. 点击任务项打开详情弹窗
6. 点击外部或清空按钮关闭搜索结果

## 截止时间格式化规则

- 已逾期：显示"已逾期 X 天"
- 今天截止：显示"今天截止"
- 明天截止：显示"明天截止"
- 7天内：显示"X 天后截止"
- 7天后：显示具体日期 "YYYY-MM-DD"
- 无截止时间：显示"无截止时间"

## 响应式设计

- 桌面端：搜索结果宽度400px
- 移动端：搜索结果宽度自适应（100vw - 32px）
- 最大高度：桌面500px，移动400px

## 注意事项

1. 搜索关键词为空时不会触发搜索
2. 搜索结果为空时显示"未找到相关任务"
3. 搜索过程中显示加载动画
4. 支持特殊字符的正则转义，避免搜索错误
